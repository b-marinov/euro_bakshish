# Euro Bakshish - Ride Sharing Application

![Backend Tests](https://github.com/b-marinov/euro_bakshish/workflows/Backend%20Unit%20Tests/badge.svg)
![Frontend Tests](https://github.com/b-marinov/euro_bakshish/workflows/Frontend%20Unit%20Tests/badge.svg)
![Docker Tests](https://github.com/b-marinov/euro_bakshish/workflows/Docker%20Build%20and%20Test/badge.svg)
![E2E Tests](https://github.com/b-marinov/euro_bakshish/workflows/End-to-End%20Tests/badge.svg)

A comprehensive ride-sharing platform built with **NextPy** - a pure Python full-stack framework that handles both backend and frontend in a single, unified codebase.

## Features

- **User Profiles**: Create and manage profiles as either a passenger or driver
- **Trip Planning**: Select start and end locations for trips
- **Trip Completion**: Complete trips with mutual ratings between passengers and drivers
- **Trip History**: Track complete history of all trips for both drivers and passengers
- **Rating System**: Maintain user ratings based on reviews from completed trips

## Project Structure

```
euro_bakshish/
‚îú‚îÄ‚îÄ euro_bakshish_app.py   # Main NextPy application (frontend + backend)
‚îú‚îÄ‚îÄ requirements-nextpy.txt # Python dependencies
‚îú‚îÄ‚îÄ backend/                # Legacy Django backend (deprecated)
‚îú‚îÄ‚îÄ web/                    # Legacy React frontend (deprecated)
‚îî‚îÄ‚îÄ docs/                   # Project documentation
```

**Note:** The application has been refactored to use NextPy framework, replacing the previous Django + React + Android stack with a unified Python application.

## Technology Stack

### Current (NextPy-based)
- **Framework**: NextPy - Pure Python full-stack framework
- **Backend**: FastAPI (built into NextPy)
- **Frontend**: React components via NextPy (no JavaScript needed!)
- **Database**: SQLModel with SQLite/PostgreSQL support
- **State Management**: Built-in NextPy state management
- **Authentication**: Session-based authentication

### Legacy (Deprecated)
- Backend: Django 4.x with Django REST Framework
- Web Frontend: React 18.x with Redux
- Android: Kotlin MVVM architecture

## Getting Started

### Quick Start (Recommended) üöÄ

**Run the NextPy application:**

```bash
# Install dependencies
pip install -r requirements-nextpy.txt

# Run the application
python euro_bakshish_app.py

# Access the application
# Web: http://localhost:3000
# API: http://localhost:8000/api/
```

### Prerequisites
- Python 3.10+
- pip (Python package manager)

**Note**: Write everything in Python - NextPy handles the JavaScript/React generation automatically under the hood. You develop in pure Python!

### Security

‚ö†Ô∏è **Security Improvements**: The NextPy application now uses proper password hashing with bcrypt. See [docs/SECURITY.md](docs/SECURITY.md) before deploying to production.

Key security features:
- ‚úÖ Secure password hashing (bcrypt)
- ‚úÖ Session-based authentication
- ‚ö†Ô∏è Requires HTTPS in production
- ‚ö†Ô∏è Configure database properly for production
- ‚ö†Ô∏è Keep dependencies updated

## Quick Commands

### Running the Application

```bash
# Development mode with hot reload
python euro_bakshish_app.py

# Production mode
nextpy run --env prod
```

### Database Management

```bash
# Initialize database
python -c "from euro_bakshish_app import init_db; init_db()"

# The database is automatically created when you run the app for the first time
```

### Legacy Setup (Deprecated)

The old Django backend and React frontend are still available in the `backend/` and `web/` directories but are no longer maintained. Refer to the git history or legacy documentation if needed.

## API Documentation

The NextPy application provides a unified API that's automatically generated and documented.

### Interactive API Documentation
When the application is running, access:
- **Swagger UI**: `http://localhost:8000/docs/`
- **ReDoc**: `http://localhost:8000/redoc/`

### Key Endpoints

All API endpoints are automatically generated by NextPy based on the application state and models:

- **Authentication**: Login/Register/Logout
- **Users**: Profile management
- **Trips**: Create, view, accept, and manage trips
- **Reviews**: Rate and review completed trips

### Quick API Test
```bash
# The NextPy framework handles all API routing automatically
# Test by using the web interface or the auto-generated API docs
```

## Documentation

- **[Docker Guide](docs/DOCKER.md)**: Complete Docker setup and commands
- **[CI/CD Pipeline](docs/CI_CD.md)**: Continuous integration and testing
- **[Setup Guide](docs/SETUP.md)**: Manual installation instructions
- **[API Documentation](docs/API.md)**: API endpoints reference
- **[Architecture](docs/ARCHITECTURE.md)**: System architecture overview
- **[Security](docs/SECURITY.md)**: Security best practices
- **[Contributing](CONTRIBUTING.md)**: How to contribute

## Testing

The NextPy application includes built-in testing capabilities:

```bash
# Run tests
python -m pytest tests/

# The application uses NextPy's built-in testing framework
```

**Note:** The legacy test infrastructure for Django and React has been deprecated. New tests should be written for the NextPy application.

## Contributing

Please read CONTRIBUTING.md for details on our code of conduct and the process for submitting pull requests.

## License

This project is licensed under the MIT License - see the LICENSE file for details.
